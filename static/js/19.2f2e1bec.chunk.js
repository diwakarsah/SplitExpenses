(this.webpackJsonpbill_splitter_v1=this.webpackJsonpbill_splitter_v1||[]).push([[19],{347:function(e,t,a){"use strict";a.r(t);var n=a(123),l=a(16),s=a(0),c=a.n(s),i=a(68),o=a(1),r=a(2),m=a(4),u=a.n(m),d=a(5),b=c.a.forwardRef((function(e,t){var a=e.bsPrefix,n=e.variant,l=e.animation,s=e.size,i=e.children,m=e.as,b=void 0===m?"div":m,p=e.className,E=Object(r.a)(e,["bsPrefix","variant","animation","size","children","as","className"]),f=(a=Object(d.b)(a,"spinner"))+"-"+l;return c.a.createElement(b,Object(o.a)({ref:t},E,{className:u()(p,f,s&&f+"-"+s,n&&"text-"+n)}),i)}));b.displayName="Spinner";var p=b,E=a(28),f=a(113),h=a(25);t.default=function(e){var t=Object(s.useState)({}),a=Object(l.a)(t,2),o=a[0],r=a[1],m=Object(s.useState)(!1),u=Object(l.a)(m,2),d=u[0],b=u[1];return c.a.createElement(i.a,{show:e.show,centered:!0,onHide:e.hide},c.a.createElement(i.a.Header,{closeButton:!0},c.a.createElement(i.a.Title,{className:"txt-color "},"Final Settlement")),d?c.a.createElement(i.a.Body,null,c.a.createElement("div",{className:"d-flex justify-content-center align-content-center"},c.a.createElement(p,{animation:"border",role:"status",variant:"success"},c.a.createElement("span",{className:"sr-only"},"Loading...")))):c.a.createElement(i.a.Body,null,o.emailNotSend&&c.a.createElement("p",{className:"text-danger"}," ",o.emailNotSend),o.success&&c.a.createElement("p",{className:"text-success"}," ",o.success),"string"!==typeof e.data?c.a.createElement("div",null,c.a.createElement("h4",null,"Suggested Payments"),c.a.createElement("ul",null,Object.entries(e.data).map((function(e){return e[1].map((function(t,a){return c.a.createElement("li",{key:a},t.name," pays ",e[0]," = ",t.amount.toFixed(2))}))}))),c.a.createElement("h4",null,"Total Money Spent"),c.a.createElement("ul",null,e.totalSpending.map((function(e,t){return c.a.createElement("li",{key:t},e.name," = ",e.amount.toFixed(2))}))),console.log("spending ",e.totalSpending)):c.a.createElement("h4",{style:{color:"red"}},e.data)),c.a.createElement(i.a.Footer,null,"string"!==typeof e.data?c.a.createElement("button",{className:"btn btn-success",onClick:function(){var t={billingDetails:e.billingDetails,settlementList:e.data},a="Bearer "+e.jwt,n=new Headers({"Content-Type":"application/json",Authorization:a});fetch("/download",{method:"post",body:JSON.stringify(t),headers:n}).then((function(e){var t=e.headers.get("Content-Disposition").split("filename=")[1];e.blob().then((function(e){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,n.click()}))}))}},c.a.createElement(E.Icon,{icon:f.download})," Download"):null,"string"!==typeof e.data?c.a.createElement("button",{className:"btn btn-success",onClick:function(){b(!0);var t=function(){var t=[],a=[];return e.members.map((function(e){return null!==e.userName?t.push(e.userName):a.push(e.fullName),t})),console.log("email",t),{email:t,user:a}}(),a=t.email,l=t.user,s={senders:a,billingDetails:e.billingDetails,settlementList:e.data};Object(h.a)("/sendEmail",s,"post",e.jwt).then((function(e){console.log("res",e),e.ok&&0===l.length?(r({success:"Email was successfully sent"}),b(!1)):e.ok&&0!==l.length?(r({success:"Email was successfully sent",emailNotSend:Object(n.a)(l)+" didn't have the email address in the system. No email has sent to them..."}),b(!1)):e.ok||(r({emailNotSend:"Email not sent. Something went wrong. Please try resending again.."}),b(!1))}))}},c.a.createElement(E.Icon,{icon:f.send})," Send Email"):null,c.a.createElement("button",{className:"btn btn-secondary",onClick:e.hide},c.a.createElement(E.Icon,{icon:f.close})," Close")))}}}]);
//# sourceMappingURL=19.2f2e1bec.chunk.js.map